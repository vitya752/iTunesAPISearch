(window.webpackJsonpitunessearch=window.webpackJsonpitunessearch||[]).push([[0],{16:function(e,t,a){e.exports=a(32)},21:function(e,t,a){},22:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),i=a.n(c),o=a(2),s=a(3),l=a(5),u=a(4),m=a(6),d=(a(21),a(22),a(11),a(7)),p=a(8),b=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedType:a.props.typesMedia[0].value,term:"",disabled:!0,openWindow:!0},a.onChangeType=function(e){a.setState({selectedType:e.target[e.target.selectedIndex].value})},a.onChangeTerm=function(e){a.setState({term:e.target.value,disabled:!(e.target.value.length>0)})},a.onSubmit=function(e){var t=a.state,n=t.selectedType,r=t.term;e.preventDefault(),a.props.onSubmitQuery(n,r),a.onSearchWindowSetState(!1),a.props.onDisableScroll(!1)},a.onSearchWindowSetState=function(e){a.setState({openWindow:e}),!0===e?a.props.onDisableScroll(!0):a.props.onDisableScroll(!1)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.typesMedia.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})),a=this.state.openWindow?"":"close";return r.a.createElement("div",{className:"search"},r.a.createElement("button",{type:"button",className:"btn btn-success btn--open",onClick:function(){return e.onSearchWindowSetState(!0)}},r.a.createElement(d.a,{icon:p.a})),r.a.createElement("div",{className:"container-search ".concat(a)},r.a.createElement("button",{type:"button",className:"btn btn-danger btn--close",onClick:function(){return e.onSearchWindowSetState(!1)}},r.a.createElement(d.a,{icon:p.b})),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"header mb-3"},"iTunes API Search"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Search")),r.a.createElement("select",{className:"form-control select-custom",onChange:this.onChangeType,value:this.state.selectedType},t),r.a.createElement("input",{type:"text",className:"form-control",onChange:this.onChangeTerm,value:this.state.term}),r.a.createElement("button",{type:"submit",className:"btn btn-success btn-submit",disabled:this.state.disabled},"Search"))))))}}]),t}(n.Component),h=(a(28),function(e){var t=e.name,a=(e.url,e.img),n=(e.price,e.playMedia);return r.a.createElement("li",{"data-name":t,onClick:n},r.a.createElement("img",{src:a,alt:t}))}),v=(a(29),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=100,t=this.props,a=t.data,n=t.activeMedia,c=t.playMedia,i=n?" active":"",o=0===a.length?"Content is empty!":a.map((function(t){var a=t.name,n=t.url,i=t.img,o=t.price;return r.a.createElement(h,{key:e++,url:n,name:a,img:i,price:o,playMedia:function(){return c(n)}})}));return r.a.createElement("ul",{className:"content ".concat(i)},o)}}]),t}(n.Component)),f=(a(30),function(e){var t,a=e.url,n=e.typeMedia,c=e.closeMedia;switch(n){case"music":t=r.a.createElement("audio",{autoPlay:!0,controls:!0,src:a});break;default:t=r.a.createElement("video",{autoPlay:!0,controls:!0,src:a})}return r.a.createElement("div",{className:"media"},t,r.a.createElement("button",{type:"button",className:"btn btn-danger btn-media-close",onClick:c},r.a.createElement(d.a,{icon:p.b})))}),S=a(9),y=a.n(S),E=a(13),g=function e(){var t=this;Object(o.a)(this,e),this._apiBase="https://itunes.apple.com/search",this.getResource=function(){var e=Object(E.a)(y.a.mark((function e(a){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(t._apiBase).concat(a)),e.next=3,fetch(n,{method:"POST"});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getMedia=function(){var e=Object(E.a)(y.a.mark((function e(a,n){var r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.toLowerCase().split(" ").join("+"),e.next=3,t.getResource("?term=".concat(r,"&media=").concat(n));case 3:return c=e.sent,e.next=6,c.results.map(t._transformResults);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this._transformResults=function(e){return{name:e.trackName,img:e.artworkUrl100,url:e.previewUrl,price:e.trackPrice}}},w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).iTunesService=new g,a._maxId=100,a.state={data:[],term:"",media:"musicVideo",activeMedia:!1,url:"",disableScroll:!1},a.playMedia=function(e){var t=a.state.activeMedia;window.scrollTo(0,0),a.setState({activeMedia:!t,url:e,disableScroll:!0})},a.closeMedia=function(){a.setState({activeMedia:!1,disableScroll:!1})},a.onSubmitQuery=function(e,t){a.iTunesService.getMedia(t,e).then((function(n){a.setState((function(a){return{data:n,media:e,term:t}}))})).catch((function(){a.setState({data:[],media:e,term:t})}))},a.onDisableScroll=function(e){a.setState({disableScroll:e})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.media,c=t.activeMedia,i=t.url,o=t.disableScroll,s=c?r.a.createElement(f,{url:i,typeMedia:n,closeMedia:this.closeMedia}):null,l=o||c?{position:"fixed",overflow:"hidden",width:"100%",height:"100%"}:null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{typesMedia:[{label:"Music Video",value:"musicVideo"},{label:"Music",value:"music"},{label:"Movie",value:"movie"},{label:"Audiobook",value:"audiobook"}],onSubmitQuery:this.onSubmitQuery,onDisableScroll:this.onDisableScroll}),r.a.createElement("div",{className:"main-container",style:l},r.a.createElement("div",{className:"container"},r.a.createElement(v,{data:a,activeMedia:c,playMedia:function(t){return e.playMedia(t)}}),s)))}}]),t}(n.Component);i.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.39896a35.chunk.js.map